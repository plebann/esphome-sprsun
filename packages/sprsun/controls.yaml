# SPRSUN Heat Pump Package - Controls
# Part of the modular SPRSUN heat pump integration package

select:
  # Operation mode selection
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Unit mode
    id: ${sprsun_device_prefix}_unit_mode
    address: 0x0036
    entity_category: config
    value_type: U_WORD
    optimistic: false
    skip_updates: 6
    optionsmap:
      "CWU": 0
      "Heating": 1
      "Cooling": 2
      "Heating + HW": 3
      "Cooling + HW": 4

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Pump mode
    id: ${sprsun_device_prefix}_pump_mode
    address: 0x0186
    entity_category: config
    value_type: U_WORD
    optimistic: false
    skip_updates: 6
    optionsmap:
      "Manual": 0
      "Auto": 1

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Compressor mode
    id: ${sprsun_device_prefix}_compressor_mode
    address: 0x0190
    entity_category: config
    value_type: U_WORD
    optimistic: false
    skip_updates: 6
    optionsmap:
      "Normal": 0
      "Eco": 1
      "Nigth": 2
      "Test": 3

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Pump work mode
    id: ${sprsun_device_prefix}_pump_work
    address: 0x019E
    entity_category: config
    value_type: U_WORD
    optimistic: false
    skip_updates: 10
    optionsmap:
      "Interval": 0
      "Continous": 1
      "On Demand": 2

  - platform: modbus_controller
    use_write_multiple: true
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Heat pump switch
    id: ${sprsun_device_prefix}_on_off
    address: 0x0032
    value_type: U_WORD
    optionsmap:
      "OFF": 0
      "ON": 1
    lambda: |-
      if ((x & 0x0001) == 0)
        return std::string("OFF");
      if ((x & 0x0001) == 1)
        return std::string("ON");
      return {};
    write_lambda: |-
      uint16_t unmodified = id(parameter_marker_definition_raw).state;
      uint16_t modified = ((unmodified & ~0x0001) | value);
      return modified;
 
  - platform: modbus_controller
    use_write_multiple: true
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: "${sprsun_device_name} Manual frequency selection"
    id: ${sprsun_device_prefix}_manual_frequency_selection
    address: 0x0032
    entity_category: config
    value_type: U_WORD
    optionsmap:
      "OFF": 0
      "ON": 4
    lambda: |-
      if ((x & 0x0004) == 0)
        return std::string("OFF");
      if ((x & 0x0004) == 4)
        return std::string("ON");
      return {};
    write_lambda: |-
      uint16_t unmodified =  id(parameter_marker_definition_raw).state;
      uint16_t modified = ((unmodified & ~0x0004) | value);
      return modified;

number:
  # Temperature setpoints
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Heating setpoint
    address: 0x00CC
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_heating_setpoint
    value_type: U_WORD
    min_value: 10
    max_value: 55
    lambda: 'return x * 0.5;'
    write_lambda: 'return x / 0.5;'
    step: 1
    mode: box
    entity_category: config
    skip_updates: 6
    bitmask: 0x00FF

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Cooling setpoint
    address: 0x00CB
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_cooling_setpoint
    value_type: U_WORD
    min_value: 12
    max_value: 30
    lambda: 'return x * 0.5;'
    write_lambda: 'return x / 0.5;'
    step: 1
    mode: box
    entity_category: config
    skip_updates: 6
    bitmask: 0x00FF

  # Temperature calibration
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Inlet temp calibration
    address: 0x00CE
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_inlet_temp_calibration
    value_type: S_WORD
    min_value: -30
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
 
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Outlet temp calibration
    address: 0x00CF
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_outlet_temp_calibration
    value_type: S_WORD
    min_value: -30
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Defrost parameters
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost frequency
    address: 0x0037
    skip_updates: 10
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_defrost_freq
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config 

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost period 1
    address: 0x0038
    skip_updates: 10
    unit_of_measurement: "MIN"
    id: ${sprsun_device_prefix}_defrost_period_1
    value_type: U_WORD
    min_value: 10
    max_value: 120
    step: 1
    mode: box
    entity_category: config  

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost period 2
    address: 0x0039
    skip_updates: 10      
    unit_of_measurement: "MIN"
    id: ${sprsun_device_prefix}_defrost_period_2
    value_type: U_WORD
    min_value: 10
    max_value: 120
    step: 1
    mode: box
    entity_category: config  

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost period 3
    address: 0x003A
    skip_updates: 10      
    unit_of_measurement: "MIN"
    id: ${sprsun_device_prefix}_defrost_period_3
    value_type: U_WORD
    min_value: 10
    max_value: 120
    step: 1
    mode: box
    entity_category: config  

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Compressor total run
    address: 0x003B
    skip_updates: 10      
    unit_of_measurement: "MIN"
    id: ${sprsun_device_prefix}_comp_total_run
    value_type: U_WORD
    min_value: 1
    max_value: 300
    lambda: 'return x * 5.0;'
    write_lambda: 'return x / 5.0;'
    step: 1
    mode: box
    entity_category: config 

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Compressor continuous run
    address: 0x003C
    skip_updates: 10      
    unit_of_measurement: "MIN"
    id: ${sprsun_device_prefix}_comp_continuous_run
    value_type: U_WORD
    min_value: 5
    max_value: 90
    step: 1
    mode: box
    entity_category: config 

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost time
    address: 0x003D
    skip_updates: 10      
    unit_of_measurement: "MIN"
    id: ${sprsun_device_prefix}_defrost_time
    value_type: U_WORD
    min_value: 5
    max_value: 20
    step: 1
    mode: box
    entity_category: config

  # Temperature differentials
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} temp diff
    address: 0x00C6
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_temp_diff
    value_type: U_WORD
    min_value: 2
    max_value: 18
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Cooling temp diff
    address: 0x00C7
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_cooling_temp_diff
    value_type: U_WORD
    min_value: 1
    max_value: 10
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Heating frequency curves
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of heat (T >= 14 °C)
    address: 0x0104
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_heat_r04
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of heat [9, 14 °C)
    address: 0x0105
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_heat_r05
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of heat [4, 9 °C)
    address: 0x0106
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_heat_r06
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of heat [-5, 4 °C)
    address: 0x0107
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_heat_r07
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of heat [-10, -5 °C)
    address: 0x0108
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_heat_r08
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of heat [-16, -10 °C)
    address: 0x0109
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_heat_r09
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of heat [-23, -16 °C)
    address: 0x010A
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_heat_r10
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of heat (T < -23 °C)
    address: 0x010B
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_heat_r11
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Cooling frequency curves
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of cool (T >= 38 °C)
    address: 0x010C
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_cool_r12
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of cool [30, 38 °C)
    address: 0x010D
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_cool_r13
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of cool [25, 30 °C)
    address: 0x010E
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_cool_r14
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq of cool (T < 25 °C)
    address: 0x010F
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_of_cool_r15
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Manual frequency setting
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Manual frequency setting
    id: ${sprsun_device_prefix}_manual_frequency_setting
    address: 0x00FB
    unit_of_measurement: "Hz"
    value_type: U_WORD
    min_value: 25
    max_value: 80
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Delta setting
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Delta setting
    id: ${sprsun_device_prefix}_delta_set
    address: 0x018D
    unit_of_measurement: "°C"
    value_type: U_WORD
    min_value: 5
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Economic mode - Heating ambient temperatures
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Heat ambi 1
    address: 0x0169
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_heat_ambi_1
    value_type: S_WORD
    min_value: -30
    max_value: 50
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Heat ambi 2
    address: 0x016A
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_heat_ambi_2
    value_type: S_WORD
    min_value: -30
    max_value: 50
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Heat ambi 3
    address: 0x016B
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_heat_ambi_3
    value_type: S_WORD
    min_value: -30
    max_value: 50
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Heat ambi 4
    address: 0x016C
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_heat_ambi_4
    value_type: S_WORD
    min_value: -30
    max_value: 50
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Economic mode - Cooling ambient temperatures
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Cool ambi 1
    address: 0x0171
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_cool_ambi_1
    value_type: S_WORD
    min_value: -30
    max_value: 50
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Cool ambi 2
    address: 0x0172
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_cool_ambi_2
    value_type: S_WORD
    min_value: -30
    max_value: 50
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Cool ambi 3
    address: 0x0173
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_cool_ambi_3
    value_type: S_WORD
    min_value: -30
    max_value: 50
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Cool ambi 4
    address: 0x0174
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_cool_ambi_4
    value_type: S_WORD
    min_value: -30
    max_value: 50
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Economic mode - Heating target temperatures
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Heat temp 1
    address: 0x0175
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_heat_temp_1
    value_type: U_WORD
    min_value: 10
    max_value: 55
    lambda: "return x * 0.5;"
    write_lambda: "return x / 0.5;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    bitmask: 0x00FF 

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Heat temp 2
    address: 0x0176
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_heat_temp_2
    value_type: U_WORD
    min_value: 10
    max_value: 55
    lambda: "return x * 0.5;"
    write_lambda: "return x / 0.5;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    bitmask: 0x00FF

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Heat temp 3
    address: 0x0177
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_heat_temp_3
    value_type: U_WORD
    min_value: 10
    max_value: 55
    lambda: "return x * 0.5;"
    write_lambda: "return x / 0.5;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    bitmask: 0x00FF

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Heat temp 4
    address: 0x0178
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_heat_temp_4
    value_type: U_WORD
    min_value: 10
    max_value: 55
    lambda: "return x * 0.5;"
    write_lambda: "return x / 0.5;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    bitmask: 0x00FF

  # Economic mode - Cooling target temperatures
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Cool temp 1
    address: 0x017D
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_cool_temp_1
    value_type: U_WORD
    min_value: 12
    max_value: 30
    lambda: "return x * 0.5;"
    write_lambda: "return x / 0.5;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    bitmask: 0x00FF

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Cool temp 2
    address: 0x017E
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_cool_temp_2
    value_type: U_WORD
    min_value: 12
    max_value: 30
    lambda: "return x * 0.5;"
    write_lambda: "return x / 0.5;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    bitmask: 0x00FF

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Cool temp 3
    address: 0x017F
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_cool_temp_3
    value_type: U_WORD
    min_value: 12
    max_value: 30
    lambda: "return x * 0.5;"
    write_lambda: "return x / 0.5;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    bitmask: 0x00FF

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Eco Cool temp 4
    address: 0x0180
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_economic_cool_temp_4
    value_type: U_WORD
    min_value: 12
    max_value: 30
    lambda: "return x * 0.5;"
    write_lambda: "return x / 0.5;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    bitmask: 0x00FF

  # Frequency adjustment limits (lower)
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq adj lower limit R21
    address: 0x0110
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_adj_lower_limit_r21
    value_type: U_WORD
    min_value: 0
    max_value: 125
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq adj lower limit R22
    address: 0x0111
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_adj_lower_limit_r22
    value_type: U_WORD
    min_value: 0
    max_value: 125
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq adj lower limit R23
    address: 0x0112
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_adj_lower_limit_r23
    value_type: U_WORD
    min_value: 0
    max_value: 125
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq adj lower limit R24
    address: 0x0113
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_adj_lower_limit_r24
    value_type: U_WORD
    min_value: 0
    max_value: 125
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Frequency adjustment limits (upper)
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq adj upper limit R25
    address: 0x0114
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_adj_upper_limit_r25
    value_type: U_WORD
    min_value: 0
    max_value: 125
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq adj upper limit R26
    address: 0x0115
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_adj_upper_limit_r26
    value_type: U_WORD
    min_value: 0
    max_value: 125
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq adj upper limit R27
    address: 0x0116
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_adj_upper_limit_r27
    value_type: U_WORD
    min_value: 0
    max_value: 125
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq adj upper limit R28
    address: 0x0117
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_adj_upper_limit_r28
    value_type: U_WORD
    min_value: 0
    max_value: 125
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
  
  # ECO mode frequency curves
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq eco R42
    address: 0x0135
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_eco_r42
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq eco R43
    address: 0x0136
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_eco_r43
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq eco R44
    address: 0x0137
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_eco_r44
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
    
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq eco R45
    address: 0x0138
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_eco_r45
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
      
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq eco R46
    address: 0x0139
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_eco_r46
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
      
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq eco R47
    address: 0x013A
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_eco_r47
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10
      
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq eco R48
    address: 0x013B
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_eco_r48
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Freq eco R49
    address: 0x013C
    unit_of_measurement: "Hz"
    id: ${sprsun_device_prefix}_freq_eco_r49
    value_type: U_WORD
    min_value: 30
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # DC Pump configuration
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} F14 DC pump cycle
    address: 0x0187
    unit_of_measurement: "s"
    id: ${sprsun_device_prefix}_dc_pump_cycle
    value_type: U_WORD
    min_value: 10
    max_value: 120
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} F15 DC pump freq set
    address: 0x0188
    unit_of_measurement: "%"
    id: ${sprsun_device_prefix}_dc_pump_freq_set
    value_type: U_WORD
    min_value: 10
    max_value: 100
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} F16 DC pump max freq
    address: 0x0189
    unit_of_measurement: "%"
    id: ${sprsun_device_prefix}_dc_pump_max_freq
    value_type: U_WORD
    min_value: 10
    max_value: 100
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} F17 DC pump min freq
    address: 0x018A
    unit_of_measurement: "%"
    id: ${sprsun_device_prefix}_dc_pump_min_freq
    value_type: U_WORD
    min_value: 10
    max_value: 100
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} F18 DC pump scale factor
    address: 0x018B
    id: ${sprsun_device_prefix}_dc_pump_scale_factor
    value_type: U_WORD
    min_value: 1
    max_value: 10
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} F19 DC pump diff
    address: 0x018C
    id: ${sprsun_device_prefix}_dc_pump_diff
    value_type: U_WORD
    min_value: 0
    max_value: 100
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  # Defrost advanced configuration
  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost in stp.
    address: 0x00D4
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_defrost_in_stp
    value_type: S_WORD
    min_value: -15
    max_value: -1
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost exit stp.
    address: 0x00D5
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_defrost_exit_stp
    value_type: U_WORD
    min_value: 1
    max_value: 40
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Def ambi coil 1
    address: 0x00D6
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_def_ambi_coil_1
    value_type: U_WORD
    min_value: 0
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Def ambi coil 2
    address: 0x00D7
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_def_ambi_coil_2
    value_type: U_WORD
    min_value: 0
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Def ambi coil 3
    address: 0x00D8
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_def_ambi_coil_3
    value_type: U_WORD
    min_value: 0
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost ambient stp. 1
    address: 0x00D9
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_defrost_ambi_stp_1
    value_type: S_WORD
    min_value: -30
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost ambient stp. 2
    address: 0x00DA
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_defrost_ambi_stp_2
    value_type: S_WORD
    min_value: -30
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost ambient stp. 3
    address: 0x00DB
    unit_of_measurement: "°C"
    id: ${sprsun_device_prefix}_defrost_ambi_stp_3
    value_type: S_WORD
    min_value: -30
    max_value: 30
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10

  - platform: modbus_controller
    modbus_controller_id: ${sprsun_device_prefix}_pc
    name: ${sprsun_device_name} Defrost fan speed
    address: 0x01B1
    unit_of_measurement: "rpm"
    id: ${sprsun_device_prefix}_defrost_fan_speed
    value_type: U_WORD
    min_value: 20
    max_value: 100
    lambda: "return x / 10.0;"
    write_lambda: "return x * 10.0;"
    step: 1
    mode: box
    entity_category: config
    skip_updates: 10